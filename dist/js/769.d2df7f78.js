"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[769],{8763:function(e,t,s){s.d(t,{Z:function(){return N}});var a=s(3396);const i={class:"header"},n={class:"header-main"},r={class:"logo"},l=(0,a._)("span",null,null,-1),o=[l],c=(0,a._)("i",{class:"fa-solid fa-circle-xmark"},null,-1),u=[c],d={class:"menu"},m={key:0,class:"menu-item menu-item-has-children"},p={href:"#","data-toggle":"sub-menu"},h=["src"],g={class:"sub-menu"},f={class:"menu-item"},v={class:"menu-item"},b={class:"menu-item"};function y(e,t,s,l,c,y){const _=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",n,[(0,a._)("div",r,[(0,a.Wm)(_,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Wolimby")])),_:1})]),(0,a._)("div",{class:"open-nav-menu",onClick:t[0]||(t[0]=(...e)=>y.toggleNav&&y.toggleNav(...e))},o),(0,a._)("div",{class:"menu-overlay",onClick:t[1]||(t[1]=(...e)=>y.toggleNav&&y.toggleNav(...e))}),(0,a._)("nav",{class:"nav-menu",onClick:t[4]||(t[4]=(...e)=>y.navMenuOpen&&y.navMenuOpen(...e))},[(0,a._)("div",{class:"close-nav-menu",onClick:t[2]||(t[2]=(...e)=>y.toggleNav&&y.toggleNav(...e))},u),(0,a._)("ul",d,[e.isLoggedIn?((0,a.wg)(),(0,a.iD)("li",m,[(0,a._)("a",p,[(0,a._)("img",{src:e.currentUser?.profile?.profilePicture,class:"pfp",alt:"pfp"},null,8,h)]),(0,a._)("ul",g,[(0,a._)("li",f,[(0,a.Wm)(_,{to:"/user/"+e.currentUser?.profile?.username},{default:(0,a.w5)((()=>[(0,a.Uk)("Profilom")])),_:1},8,["to"])]),(0,a._)("li",v,[(0,a.Wm)(_,{to:"/settings"},{default:(0,a.w5)((()=>[(0,a.Uk)("Beállítások")])),_:1})]),(0,a._)("li",b,[(0,a._)("a",{onClick:t[3]||(t[3]=(...e)=>y.logoutUser&&y.logoutUser(...e))},"Kijelentkezés")])])])):(0,a.kq)("",!0)])])])])}s(7658);var _=s(65),w={name:"Navbar",data(){return{}},computed:{...(0,_.Se)(["isLoggedIn","currentUser","userError"])},methods:{...(0,_.nv)(["getCurrentUser","logout","addNotification"]),toggleNav(){document.querySelector(".nav-menu").classList.toggle("open"),document.querySelector(".menu-overlay").classList.toggle("active"),document.body.classList.toggle("hidden-scrolling")},navMenuOpen(e){if(e.target.hasAttribute("data-toggle")&&window.innerWidth<=991){e.preventDefault();const t=e.target.parentElement;if(t.classList.contains("active"))this.collapseSubMenu();else{document.querySelector(".nav-menu").querySelector(".menu-item-has-children.active")&&this.collapseSubMenu(),t.classList.add("active");const e=t.querySelector(".sub-menu");e.style.maxHeight=e.scrollHeight+"px"}}},collapseSubMenu(){document.querySelector(".nav-menu").querySelector(".menu-item-has-children.active .sub-menu").removeAttribute("style"),document.querySelector(".nav-menu").querySelector(".menu-item-has-children.active").classList.remove("active")},resizeFix(){navMenu.classList.contains("open")&&this.toggleNav(),navMenu.querySelector(".menu-item-has-children.active")&&this.collapseSubMenu()},whenResize(){this.innerWidth>991&&this.resizeFix()},siteSettings(){"none"!=this.currentUser.appearance.backgroundImage&&(document.body.style.backgroundImage="url("+this.currentUser.appearance.backgroundImage+")",document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundSize="auto",document.body.style.animation="none")},logoutUser(){this.logout(),this.$router.push("/"),this.addNotification({message:"Sikeres kijelentkezés.",type:"success"})}},async mounted(){this.isLoggedIn&&await this.getCurrentUser(),this.siteSettings(),window.addEventListener("resize",this.whenResize())}},k=s(89);const U=(0,k.Z)(w,[["render",y]]);var N=U},3769:function(e,t,s){s.r(t),s.d(t,{default:function(){return ce}});var a=s(3396),i=s(7139),n=s(9242);const r={class:"settings-box"},l={class:"left-section"},o={class:"profile-settings-header"},c={class:"change-pfp"},u=(0,a._)("label",{for:"display-pfp"},[(0,a._)("i",{class:"fa fa-file-image"})],-1),d=["src"],m={class:"username-roles notranslate"},p={class:"buttons"},h={class:"right-section"},g={class:"section account"},f=(0,a._)("h2",null,"Fiók beállítások",-1),v={class:"change-row"},b=(0,a._)("label",{for:"ch-us",class:"change-label"},"Felhasználónév",-1),y={class:"change-row"},_=(0,a._)("label",{for:"ch-na",class:"change-label"},"Teljes név",-1),w={class:"change-row"},k=(0,a._)("label",{for:"ch-em",class:"change-label"},"Email cím",-1),U={class:"change-row"},N=(0,a._)("label",{for:"ch-bg",class:"change-label"},"Biográfia",-1),S={class:"change-row"},C=(0,a._)("label",{for:"ch-pw",class:"change-label"},"Jelszó",-1),z=(0,a._)("div",{class:"change-row"},[(0,a._)("button",{class:"change-button",type:"submit"},"Mentés")],-1),q={class:"section appearance"},M=(0,a._)("h2",null,"Megjelenés",-1),I={class:"bg-image"},E=(0,a._)("h3",null,"Háttérkép",-1),L={class:"upload-img"},x=(0,a._)("label",{for:"upload-img"},[(0,a._)("i",{class:"fa fa-file-image"})],-1),D=["src"],F={class:"section notifications"},P={class:"section-notifications"},j=["title"],B=["src"],R={class:"section logs"},A=(0,a._)("h2",null,"Bejelentkezési napló",-1),H={class:"ip-list"},V={class:"section security"},W=(0,a._)("h2",null,"Biztonsági beállítások",-1),$={key:0,class:"privacy-settings"},O=(0,a._)("h3",null,"A profilomon látszódjon a Teljes nevem",-1),T={class:"switch name"},Y=(0,a._)("span",{class:"slider round"},null,-1),Z=(0,a._)("h3",null,"A profilomon látszódjon az Email címem",-1),K={class:"switch email"},J=(0,a._)("span",{class:"slider round"},null,-1),G={id:"modal"},Q={class:"modal-content"},X=(0,a._)("h4",null,"A fiók törlése visszavonhatatlan!",-1),ee={class:"buttons"},te=(0,a._)("button",{type:"submit",class:"submit-btn"},"Törlés",-1);function se(e,t,s,se,ae,ie){const ne=(0,a.up)("Navbar");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(ne),(0,a._)("header",null,[(0,a._)("div",r,[(0,a._)("div",l,[(0,a._)("div",o,[(0,a._)("div",c,[(0,a._)("input",{type:"file",id:"display-pfp",onChange:t[0]||(t[0]=e=>ie.changeImage(e,"pfp")),accept:"image/*"},null,32),u,(0,a._)("img",{src:ae.previewpfp?ae.previewpfp:e.currentUser.profile?.profilePicture,alt:"pfp"},null,8,d)]),(0,a._)("h3",m,(0,i.zw)(e.currentUser.profile?.username),1)]),(0,a._)("div",p,[(0,a._)("button",{onClick:t[1]||(t[1]=e=>ie.showPage(0))},"Fiókom"),(0,a._)("button",{onClick:t[2]||(t[2]=e=>ie.showPage(1))},"Megjelenés"),(0,a._)("button",{onClick:t[3]||(t[3]=e=>ie.showPage(2))},"Értesítések"),(0,a._)("button",{onClick:t[4]||(t[4]=e=>ie.showPage(3))},"Napló"),(0,a._)("button",{onClick:t[5]||(t[5]=e=>ie.showPage(4))},"Biztonság")])]),(0,a._)("div",h,[(0,a._)("div",g,[f,e.currentUser.profile?.username?((0,a.wg)(),(0,a.iD)("form",{key:0,onSubmit:t[11]||(t[11]=(0,n.iM)((t=>ie.saveUser(e.currentUser._id,"profile")),["prevent"])),class:"change form"},[(0,a._)("div",v,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=t=>e.currentUser.profile.username=t),class:"change-input",id:"ch-us",minlength:"3",maxlength:"20",required:""},null,512),[[n.nr,e.currentUser.profile.username]]),b]),(0,a._)("div",y,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=t=>e.currentUser.profile.name=t),class:"change-input",id:"ch-na",minlength:"4",maxlength:"20",required:""},null,512),[[n.nr,e.currentUser.profile.name]]),_]),(0,a._)("div",w,[(0,a.wy)((0,a._)("input",{type:"email","onUpdate:modelValue":t[8]||(t[8]=t=>e.currentUser.profile.email=t),class:"change-input",id:"ch-em",minlength:"6",maxlength:"30",required:""},null,512),[[n.nr,e.currentUser.profile.email]]),k]),(0,a._)("div",U,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.currentUser.profile.biography=t),class:"change-input",id:"ch-bg",minlength:"4",maxlength:"30",required:""},null,512),[[n.nr,e.currentUser.profile.biography]]),N]),(0,a._)("div",S,[(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":t[10]||(t[10]=e=>ae.password=e),class:"change-input",id:"ch-pw",minlength:"6"},null,512),[[n.nr,ae.password]]),C]),z],32)):(0,a.kq)("",!0)]),(0,a._)("div",q,[M,(0,a._)("div",I,[E,(0,a._)("div",L,[(0,a._)("input",{type:"file",id:"upload-img",onChange:t[12]||(t[12]=e=>ie.changeImage(e,"bgimg")),accept:"image/*"},null,32),(0,a._)("i",{class:"fa fa-trash",onClick:t[13]||(t[13]=t=>ie.saveUser(e.currentUser._id,"appearance","deletebgimg"))}),x,(0,a._)("img",{src:ae.previewbg?ae.previewbg:ae.bgimage,alt:"bg-image"},null,8,D)]),(0,a._)("button",{type:"submit",onClick:t[14]||(t[14]=t=>ie.saveUser(e.currentUser._id,"appearance","theme")),class:"submit-btn"}," Mentés ")])]),(0,a._)("div",F,[(0,a._)("h2",null,[(0,a._)("i",{class:"fa fa-refresh",onClick:t[15]||(t[15]=(...e)=>this.getCurrentUser&&this.getCurrentUser(...e))}),(0,a.Uk)(" Értesítések kezelése "),(0,a._)("i",{class:"fa fa-trash",onClick:t[16]||(t[16]=t=>ie.removeNotifications(e.currentUser._id))})]),(0,a._)("div",P,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.currentUser.profile?.notificationList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"notification",key:e.id,title:ie.formatDate(e.createdAt)},[(0,a._)("h2",null,[(0,a._)("img",{src:e.profilePicture,alt:"pfp"},null,8,B),(0,a.Uk)(" "+(0,i.zw)(e.title),1)]),(0,a._)("h3",null,(0,i.zw)(e.message),1)],8,j)))),128))])]),(0,a._)("div",R,[A,(0,a._)("div",H,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.currentUser.profile?.ipList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"ip",key:e.id},[(0,a._)("h4",null,(0,i.zw)(e.ip)+" - "+(0,i.zw)(ie.formatDate(e.loggedAt)),1)])))),128))])]),(0,a._)("div",V,[W,e.currentUser.privacy?((0,a.wg)(),(0,a.iD)("div",$,[O,(0,a._)("label",T,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=t=>e.currentUser.privacy.showName=t),onClick:t[18]||(t[18]=t=>ie.saveUser(e.currentUser._id,"privacy",e.boolean={showName:e.currentUser.privacy.showName=!e.currentUser.privacy.showName}))},null,512),[[n.e8,e.currentUser.privacy.showName]]),Y]),Z,(0,a._)("label",K,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=t=>e.currentUser.privacy.showEmail=t),onClick:t[20]||(t[20]=t=>ie.saveUser(e.currentUser._id,"privacy",e.boolean={showEmail:e.currentUser.privacy.showEmail=!e.currentUser.privacy.showEmail}))},null,512),[[n.e8,e.currentUser.privacy.showEmail]]),J])])):(0,a.kq)("",!0),(0,a._)("form",{onSubmit:t[23]||(t[23]=(0,n.iM)((t=>ie.removeUser(e.currentUser._id)),["prevent"]))},[(0,a._)("a",{onClick:t[21]||(t[21]=e=>ie.removeUserModal(!0)),class:"modal-opener"},"Fiók törlése"),(0,a._)("div",G,[(0,a._)("div",Q,[X,(0,a._)("div",ee,[(0,a._)("a",{onClick:t[22]||(t[22]=e=>ie.removeUserModal(!1))},"Mégsem"),te])])])],32)])])])])],64)}s(7658);var ae=s(65),ie=s(9419),ne=s(8763),re={name:"ProfileSettings",components:{Navbar:ne.Z},data(){return{previewpfp:"",previewbg:"",bgimage:"",theme:localStorage.getItem("theme")||"dark",isActiveDark:!1,isActiveLight:!1,password:"",notifications:this.notifications}},computed:{...(0,ae.Se)(["currentUser","userError"])},methods:{...(0,ae.nv)(["getCurrentUser","patchUser","patchUserSite","patchUserPrivacy","uploadImage","deleteUser","addNotification","deleteNotifications"]),checkUserRoles(){(0,ie.IT)(this.currentUser.profile.roles)},formatDate(e){const t=new Date(e);function s(e){return e<10&&(e="0"+e),e}const a=`${t.getFullYear()}.${s(t.getMonth()+1)}.${s(t.getDate())} ${s(t.getHours())}:${s(t.getMinutes())}`;return a},changeImage(e,t){"pfp"==t&&(this.pfp=e.target.files[0],this.previewpfp=URL.createObjectURL(this.pfp),this.addNotification({message:"Ez csak egy előnézet, mentsd el a Fiókom menüben a Mentés gombbal.",type:"information"})),"bgimg"==t&&(this.bgimg=e.target.files[0],this.previewbg=URL.createObjectURL(this.bgimg),this.addNotification({message:"Ez csak egy előnézet, mentsd el a Mentés gombbal.",type:"information"}))},async saveUser(e,t,s){let a,i;switch(t){case"profile":if(i="profile",this.password.length>0){const e=document.getElementById("ch-pw");e.required=!0}if(this.pfp){const e=new FormData;e.append("image",this.pfp),await this.uploadImage(e).then((e=>{this.link=e.data.data.link}))}a={username:this.currentUser.profile.username,name:this.currentUser.profile.name,email:this.currentUser.profile.email,biography:this.currentUser.profile.biography,profilePicture:this.link?this.link:this.currentUser.profile.profilePicture,password:this.password?this.password:void 0};break;case"appearance":if(i="appearance",this.bgimg){const e=new FormData;e.append("image",this.bgimg),await this.uploadImage(e).then((e=>{this.bglink=e.data.data.link}))}1!=s.showNav&&0!=s.showNav||(1==s.showNav&&(document.querySelector("nav").style.display="block"),0==s.showNav&&(document.querySelector("nav").style.display="none"),a={showNav:s.showNav}),1!=s.showFooter&&0!=s.showFooter||(1==s.showFooter&&(document.querySelector("footer").style.display="block"),0==s.showFooter&&(document.querySelector("footer").style.display="none"),a={showFooter:s.showFooter}),"theme"==s&&(this.bglink&&(document.body.style.backgroundImage="url("+this.bglink+")",document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundSize="auto",document.body.style.animation="none"),a={backgroundImage:this.bglink?this.bglink:"none",theme:this.theme}),"deletebgimg"==s&&(window.location.reload(),a={backgroundImage:"none"});break;case"privacy":i="privacy",a={showName:document.querySelector('.switch.name input[type="checkbox"]').checked,showEmail:document.querySelector('.switch.email input[type="checkbox"]').checked};break}this.patchUser([e,i,a]).then((e=>{e.data.success&&this.addNotification({message:e.data.message,type:"success"})})).catch((()=>{this.addNotification({message:this.userError,type:"error"})}))},checkBgimg(){"none"==this.currentUser.appearance.backgroundImage?this.bgimage="https://hmtienda.es/wp-content/uploads/2020/02/Imagen19-768x393.png":this.bgimage=this.currentUser.appearance.backgroundImage},removeUser(e){this.deleteUser(e).then((e=>{e.data.success&&(this.$router.push("/"),this.addNotification({message:e.data.message,type:"success"}))})).catch((()=>{this.addNotification({message:this.userError,type:"error"})}))},removeNotifications(e){this.deleteNotifications(e).then((e=>{e.data.success&&(this.addNotification({message:e.data.message,type:"success"}),this.currentUser.profile.notificationList="")})).catch((e=>{this.addNotification({message:e,type:"error"})}))},removeUserModal(e){const t=document.getElementById("modal");t.style.display=e?"block":"none"},showPage(e){const t=document.getElementsByClassName("section");for(let s=0;s<t.length;s++)t[s].style.display="none";t[e].style.display="block"}},async mounted(){await this.getCurrentUser(),this.checkUserRoles(),this.checkBgimg()}},le=s(89);const oe=(0,le.Z)(re,[["render",se]]);var ce=oe}}]);
//# sourceMappingURL=769.d2df7f78.js.map